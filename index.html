<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style>
            .c { }
            .left {
                border-top:1px solid #000;
                width:50%;
                float:left;
                left:0;
            }
            .right {
                border-top:1px solid #000;
                float:left;
                width:50%;
                right:0;
            }
        </style>
    </head>
    <body>
        <div id='output'></div>
        <script src='togeojson.js'></script>
        <script>
        function xhr(url, callback) {
            var xhr = new XMLHttpRequest(),
                twoHundred = /^20\d$/;
            xhr.onreadystatechange = function() {
                if (4 == xhr.readyState && 0 !== xhr.status) {
                    callback(xhr);
                }
            };
            xhr.open('GET', url, true);
            xhr.send();
        };

        var tests = ['point.kml', 'polygon.kml', 'twopoints.kml', 'extended_data.kml', 'linestring.kml'];
        var output = document.getElementById('output');

        tests.forEach(function(t) {
            var od = output.appendChild(document.createElement('div'));
            var kmlpre = od.appendChild(document.createElement('pre'));
            var geopre = od.appendChild(document.createElement('pre'));
            od.className = 'c';
            kmlpre.className = 'left';
            geopre.className = 'right';
            xhr(t, function(res) {
                kmlpre.innerText = res.responseText;
                geopre.innerHTML = JSON.stringify(toGeoJSON.kml(res.responseXML), null, 2);
            });
        });
        </script>
    </body>
</html>
